<!-- TODO: desc -->

{% extends "base.html" %}

{% block styles %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/gallery.css') }}">
{% endblock %}

{% block content %}
    <div id="sidebar">
        <div class="profile-picture">
            <img src="{{ url_for('static', filename='imgs/profiles/' +  artist.id|string  + '.jpg' ) }}">
        </div>
        <h2>{{ artist.display_name }}</h2>
        <h4>{{ artist.artist_title }}</h4>
        <p>{{ artist.artist_description }}</p>
        {% if artist.id == current_user.id %}
            <a href="/upload_image">Upload Image</a>
            <a href="/add_offer">Add Offer</a>
            <a href="/edit_details">Edit Details</a>
        {% endif %}
    </div>

    <div class="gallery-container">
        <h2>Offers</h2>
        <!-- The container for the offer carousel -->
        <div class="carousel-container">
            {% for image in images %}
            <!-- Each image should be wrapped in a single slide div -->
            <div class="slide">
                <img src="{{ url_for('static', filename=image.image_path) }}" alt="{{ image.title }}">
            </div>
            {% endfor %}
        </div>

        <!-- JavaScript to manage the carousel navigation -->
        <script>
        const carouselContainer = document.querySelector(".carousel-container");
        const slides = [...document.querySelectorAll(".slide")];
        let currentSlideIndex = 0;

        function nextSlide() {
            currentSlideIndex = (currentSlideIndex + 1) % slides.length; // Move to the next slide
            const translateValue = `translateX(-${currentSlideIndex * 100}%)`;
            slides.forEach(slide => slide.style.transform = translateValue);
        }

        function prevSlide() {
            currentSlideIndex = currentSlideIndex > 0 ? currentSlideIndex - 1 : slides.length - 1; // Move to the previous slide
            const translateValue = `translateX(-${currentSlideIndex * 100}%)`;
            slides.forEach(slide => slide.style.transform = translateValue);
        }
        </script>
        <!-- Add the arrow buttons for navigation -->
        <button id="left-arrow" onclick="prevSlide();"><</button>
        <button id="right-arrow" onclick="nextSlide();">></button>

        <h2>Art Gallery</h2>
        <div class="gallery" id="imagesGallery">
            {% for image in images %}
            <div class="image-container">
                <img id="{{ image.id }}" src="{{ url_for('static', filename=image.image_path) }}" class="img-fluid" alt="{{ image.title }}">
            </div>
            {% endfor %}
        </div>
    </div>

    <div id="imageModal">
        <div class="modal-content">
            <img id="enlargedImage" src="" alt="Enlarged Image">
            <div class="image-description">
                <h3 id="imageTitle">Image Title</h3>
                <p id="imageDesc">Image description goes here...</p>
            </div>
        </div>

        <script>
        document.addEventListener('DOMContentLoaded', function () {
            const galleryImages = document.querySelectorAll('.gallery img');
            const modal = document.getElementById('imageModal');
            const modalImage = document.getElementById('enlargedImage');
            const modalTitle = document.getElementById('imageTitle');
            const modalDesc = document.getElementById('imageDesc');

            galleryImages.forEach(img => {
                img.addEventListener('click', function () {
                    modal.style.display = 'block';
                    modalImage.src = this.src;
                    modalTitle.textContent = this.alt;
                    modalDesc.textContent = 'Description for ' + this.alt;
                });
            });

            modal.addEventListener('click', function () {
                modal.style.display = 'none';
            });

            modal.style.display = 'none';
        });
        </script>
{% endblock %}

